<!-- <md-subheader class="md-no-sticky"><b>Course Name</b></md-subheader>
 -->


 <div ng-cloak>

	<div class="fabbutton">
	   <md-button ng-class="{visible:selectedTab==3}" class="md-fab md-primary md-fab-bottom-right" ng-click="viewEmail(undefined,'creat')" ng-show="authCUD">
	   <ng-md-icon icon="note_add"></ng-md-icon>
	   </md-button>
	   <md-button ng-class="{visible:selectedTab==4}" class="md-fab md-primary md-fab-bottom-right" ng-click="viewAnnoun(undefined,'creat')" ng-show="authCUD">
	   <ng-md-icon icon="note_add"></ng-md-icon>
	   </md-button>
	   
  	</div>

	<md-content class="singleCourseTabs">
		<md-tabs md-dynamic-height md-border-bottom md-selected="selectedTab" md-swipe-content="true" class="tabclass" >
			<md-tab label="Learning Material" >
				<md-content class="md-padding">
				<!-- <div class="loadingicon" ng-hide="dataLoaded">
					<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
				</div> -->
					<h3>Learning Material</h3>
					<div class="row">
						<div class="span6 main_height">
							<div class="tree">

								<treecontrol class="tree-classic"
								   tree-model="roleList"
								   options="options"
								   on-selection="showSelected(node)"
								   selected-node="node1">
								   {{node.name}}
								</treecontrol>
			

							</div>
						</div>
					</div>
				</md-content>
			</md-tab>

			<md-tab label="Assignments">
				<md-content class="md-padding">
					<div class="singlecourse main_height">
						<ul>
							<li ng-repeat="assignment in assignments">
								<img src="images/pdf_icon.png">
								<h3>{{assignment.title}}</h3>
								<p>Due Date: {{assignment.dueDate * 1000 | date:'dd-MM-yyyy, HH:mm'}} </p>
								<p>Total Points: {{assignment.totalPoint}}</p>
								<h4><a ng-click="showDetails = ! showDetails">Assignment Documents <span>
									<i class="fa fa-chevron-down" aria-hidden="true" ng-hide="showDetails"></i>
									<i class="fa fa-chevron-up" aria-hidden="true" ng-hide="!showDetails"></i>
								 </span></a></h4>

						         <div class="bubble" ng-show="showDetails">
						            <ul>
						            	<li ng-repeat="doc in assignment.assignmentDocuments" ng-click="downloadAssignment(doc)">
						            		<h3>{{doc.fileName}}</h3>
						            	</li>
						            </ul>
									<ul>
						            	<li ng-repeat="doc in assignment.solution.solutionDocuments" ng-click="downloadAssignment(doc)">
						            		<h3>Solution: {{doc.fileName}}</h3>
						            	</li>
						            </ul>
									<ul>
						            	<li ng-repeat="doc in assignment.SampleSolutionDocuments" ng-click="downloadAssignment(doc)">
						            		<h3>Sample Solution: {{doc.fileName}}</h3>
						            	</li>
						            </ul>
									<ul>
						            	<li ng-repeat="doc in assignment.correction.correctionDocuments" ng-click="downloadAssignment(doc)">
						            		<h3>Correction: {{doc.fileName}}</h3>
						            	</li>
						            </ul>
						         </div>
							</li>
						</ul>
					</div>
				</md-content>
			</md-tab>

			<md-tab label="Discussion Forum">
				<md-content class="md-padding main_height">
					<ul class="post-grid">
          					<li  class="col-s-4" ng-class="{ 'reset-s' : $index%3==0 }" >
            					<div style="margin-left:-10pX;">	
            						<h4>Assignment 1. Project Definition Template</h4>
            						<p class="discussion_question" ng-text-truncate="longText" ng-tt-chars-threshold="80">
            						</p>
            						<p class="fa fa-comment" ng-click="show_replies = !show_replies"> 1 </p>
            						<p class="discussion_username">Salman Sayani June 22</p>
            					</div>
            				</li>
       				</ul>

       				<div ng-show="show_replies" class="post-grid" style="background:#f1f3f4; margin-top:10px;">
  					
  							<div class="replybox_div">
  								<textarea rows="3" name="reply" style="width:100% !important;" placeholder="Add you reply.."></textarea>
  								<div style="width:100%;overflow: hidden;">
  							 		<div style="float:right;margin-right: -7px;"><md-button class="md-raised md-primary">Reply</md-button>
  							 		</div>
  							 	</div>
  							</div>

  							<div class="reply_from_users">
  								  <h4 class="reply_user_name">Waqar Ahmed</h4>
  								  <p class="reply_body" ng-text-truncate="replyBody" ng-tt-chars-threshold="100"></p>
  								  <p class="reply_date">June 22</p>
  							</div>
				<!-- Delete this temporary code...  -->

  							<div class="reply_from_users">
  								  <h4 class="reply_user_name">Waqar Ahmed</h4>
  								  <p class="reply_body" ng-text-truncate="replyBody" ng-tt-chars-threshold="100"></p>
  								  <p class="reply_date">June 22</p>
  							</div>
				<!-- Delete this temporary code...  -->

  							<div class="reply_from_users">
  								  <h4 class="reply_user_name">Waqar Ahmed</h4>
  								  <p class="reply_body" ng-text-truncate="replyBody" ng-tt-chars-threshold="100"></p>
  								  <p class="reply_date">June 22</p>
  							</div>							
       				</div>
				<!-- Delete this temporary code...  -->

				</md-content>
			</md-tab>


			<md-tab label="Emails">
				<md-content class="md-padding">
					<div class="singlecourse  main_height">
						<div class="md-accordion customwidth" ng-repeat="email in emails|orderBy:'created':true" ng-show="emailsLoaded" ng-init="outerIndex = $index">
        				<md-toolbar ng-init="data.expanded = false" ng-click="data.expanded = !data.expanded">

            				<div class="customcolor_email" layout="row" layout-align="begin center">
                    			<div class="type_circle h-center v-center" style="width:40px;height:40px">
                 					<span ng-style="{'background-color':colors[$index]}">{{trimFirstLetter(email.from);}}</span>
                    			</div>

                			<div id="wrapper" layout="column" flex="70">
                        		<div class="inner1"><b>{{email.subject}}</b></div>
        			    		<div class="inner2">{{email.created*1000|date:'medium'}}</div>

        					</div>

        			

            					<span flex></span>
            					<span ng-class="{expandCollapse:true, active:data.expanded}"></span>
            				</div>
        				</md-toolbar>

        				<div ng-class="{dataContent:true, activeContent:data.expanded}">

              			 	  	<md-button class="md-icon-button" ng-click="showConfirm($event,email)" ng-show="authCUD" style="float:right;margin-right:-20px;margin-top:-20px;">
	            				<ng-md-icon icon="delete" style="color:red !important;"></ng-md-icon>
	         				 	</md-button>

              			 	   <div class="clear" ng-show="authCUD"></div>

              			 	  <div style="margin-right:10px !important;">
              			 	  <p style="margin-bottom:5px;" ><b>{{email.subject}}</b></p>
              			 	 	 <p class="discussion_question" ng-bind-html="email.body" ng-text-truncate="email.body" ng-tt-chars-threshold="120"></p>
                			</div>
            			</div>
       				 </div>

       				 <div layout="row" layout-sm="column" layout-align="space-around" ng-hide="emailsLoaded" class="loadingicon">
           			 <md-progress-circular md-mode="indeterminate"></md-progress-circular>
       				 </div>
    			</div>

			<!-- <md-tab label="Emails">
				<md-content class="md-padding">
					<div class="singlecourse  main_height">
						<ul ng-repeat="email in emails" ng-show="emailsLoaded">
=======
						<ul ng-repeat="email in emails|orderBy:'created':true" ng-show="emailsLoaded" ng-init="email.swipe=false;">
>>>>>>> f37c98cf8549798fcc403b8cecbdf1fdc6dab7f5
							<li>
								<div layout="row" layout-align="begin center" ng-click="viewEmail(email,'read')" ng-swipe-left="email.swipe=true;" ng-swipe-right="email.swipe=false;">
									<div flex="grow">
										<h3>{{email.subject}}</h3>
										<p><b>Recipient:</b> {{email.recipients}}</p>
										<p><b>Created by:</b> {{email.from}}</p>
										<p><b>Created Date:</b> {{email.created*1000| date:'mediumDate'}}</p>
									</div>
									<span flex></span>
									<md-button class="md-icon-button" ng-click="deleteEmail(email); $event.stopPropagation()" ng-show="authCUD&&email.swipe">
	            					<ng-md-icon icon="delete"></ng-md-icon>
	         				 		</md-button>
	         				 	</div>
							</li>
						</ul>
					  	<div layout="row" layout-sm="column" layout-align="space-around" ng-hide="emailsLoaded" class="loadingicon">
       			 			<md-progress-circular md-mode="indeterminate"></md-progress-circular>
        				</div>
					</div> -->
<!-- 					<div class="main_height" style="margin-top:-10;">
							<div class="md-accordion customwidth" ng-repeat="email in emails">
    							<md-toolbar ng-init="data.expanded = false" ng-click="data.expanded = !data.expanded">

        							<div class="md-toolbar-tools customcolor_email" >

                					<div id="wrapper">
    								<div id="inner1"> {{email.subject}}</div>
   									<div id="inner2"> {{email.created*1000| date:'medium'}}</div>

									</div>

            							<span flex=""></span>
            							<span ng-class="{expandCollapse:true, active:data.expanded}"></span>
        							</div>
    							</md-toolbar>
    						<div ng-class="{dataContent:true, activeContent:data.expanded}" >
       						 	<div style="margin-right:40px !important;">

       						 		<b>{{email.subject}}</b>
       						 		<p class="email_body">{{email.body}}</p>
       						 		<p><b>From: </b> {{email.from}}</p>


       							 </div>
       						 </div>
						</div>

					</div> -->

				</md-content>
			</md-tab>

			<<!-- md-tab label="Announcements">
			<md-content class="md-padding">
					<div class="singlecourse  main_height">
						<ul ng-repeat="announcement in announcements|orderBy:'created':true" ng-show="announcementsLoaded" ng-init="announcement.swipe=false">
							<li>
								<div layout="row" layout-align="begin center" ng-click="authCUD ? viewAnnoun(announcement,'edit') : viewAnnoun(announcement,'read')" ng-swipe-left="announcement.swipe=true;" ng-swipe-right="announcement.swipe=false;">
									<div flex="grow">
										<h3>{{announcement.title}}</h3>
										<p><b>expire date:</b> {{(announcement.expireTime==0) ? '' : announcement.expireTime*1000| date:'mediumDate'}}</p>
										<p><b>Created Date:</b> {{announcement.created*1000| date:'mediumDate'}}</p>
									</div>
									<span flex></span>
									<md-button class="md-icon-button" ng-click="deleteAnnoun(announcement); $event.stopPropagation()" ng-show="authCUD&&announcement.swipe">
	            					<ng-md-icon icon="delete"></ng-md-icon>
	         				 		</md-button>
	         				 	</div>
							</li>
						</ul>
					  	<div layout="row" layout-sm="column" layout-align="space-around" ng-hide="announcementsLoaded" class="loadingicon">
       			 			<md-progress-circular md-mode="indeterminate"></md-progress-circular>
        				</div>
					</div>
				</md-content>
			</md-tab> -->

			<md-tab label="Announcements">
			<md-content class="md-padding">
					<div class="singlecourse  main_height">
						<div class="md-accordion customwidth" ng-repeat="announcement in announcements" ng-init="outerIndex = $index" ng-show="announcementsLoaded">
        				<md-toolbar ng-init="data.expanded = false" ng-click="data.expanded = !data.expanded">

            				<div class="customcolor_email" layout="row" layout-align="begin center">
                    			<div class="type_circle h-center v-center" style="width:40px;height:40px">
                 					<span ng-style="{'background-color':colors_announcement[$index]}">A</span>
                    			</div>

                			<div id="wrapper" layout="column" flex="70">
                        		<div class="inner1"><b>{{announcement.title}}</b></div>
        			    		<div class="inner2"><b>Created: </b>{{announcement.created*1000| date:'mediumDate'}} </div>
								<div class="inner2"><b>Expire: </b>{{(announcement.expireTime==0) ? '' : announcement.expireTime*1000| date:'mediumDate'}}</div>

        					</div>
            					<span flex></span>
            					<span ng-class="{expandCollapse:true, active:data.expanded}"></span>
            				</div>
        				</md-toolbar>

        				<div ng-class="{dataContent:true, activeContent:data.expanded}">

              			 	  	<md-button class="md-icon-button" ng-click="showConfirmAnnoucnment($event,announcement)" ng-show="authCUD" style="float:right;margin-right:-20px;margin-top:-20px;">
	            				<ng-md-icon icon="delete" style="color:red !important;"></ng-md-icon>
	         				 	</md-button>

	         				 	<md-button class="md-icon-button" ng-click="viewAnnoun(announcement,'edit')" ng-show="authCUD" style="float:right;margin-right:-5px;margin-top:-20px;">
	            				<ng-md-icon icon="edit" style="color:red !important;"></ng-md-icon>
	         				 	</md-button>

              			 	   <div class="clear" ng-show="authCUD"></div>

              			 	  <div style="margin-right:10px !important;">
              			 	  <p style="margin-bottom:5px;" ><b>{{announcement.title}}</b></p>
              			 	 	 <p class="discussion_question" ng-bind-html="announcement.body" ng-text-truncate="announcement.body" ng-tt-chars-threshold="120"></p>
                			</div>
            			</div>
       				 </div>

       				 <div layout="row" layout-sm="column" layout-align="space-around" ng-hide="emailsLoaded" class="loadingicon">
           			 <md-progress-circular md-mode="indeterminate"></md-progress-circular>
       				 </div>
    			</div>
				</md-content>
			</md-tab>
		
			
			<md-tab label="Course Info">
				<md-content class="md-padding" layout ="column">
				<div class="main_height">
					<md-card ng-repeat="courseinfo in courseinfos">
						<md-card-title>
							<md-card-title-text>
								<span class="md-headline">{{courseinfo.coursetitle}}</span>
								<span class="md-subhead">{{courseinfo.description}}</span>
							</md-card-title-text>
						</md-card-title>
						<md-card-content>
							<a href="{{courseinfo.url}}">{{courseinfo.url}}</a>
						</md-card-content>
					</md-card>
					</div>
				</md-content>
			</md-tab>
		</md-tabs>
	</md-content>

	 <div layout="row" layout-sm="column" layout-align="space-around" ng-hide="dataLoaded" class="loadingicon">
      <md-progress-circular md-mode="indeterminate"></md-progress-circular>
    </div>
</div>

